!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(2),i(3),e.exports=i(1)},function(e,t){function i(e,t,o){if(o<=0)return;let n=(t-e.scrollTop)/o*10;setTimeout(function(){e.scrollTop=e.scrollTop+n,e.scrollTop!==t&&i(e,t,o-10)},10)}window.addEventListener("scroll",()=>{let e=.9*document.querySelector(".movie-intro").offsetTop;this.oldScroll<scrollY&&scrollY>e?document.querySelector(".header__nav").classList.add("sticky"):document.querySelector(".header__nav").classList.remove("sticky"),this.oldScroll=scrollY}),document.querySelector(".header__main__btn-start").addEventListener("click",function(){const e=.96*document.querySelector(".movie-app").offsetTop;i(document.documentElement,e,50)}),document.querySelector(".header__main__btn-last").addEventListener("click",function(){const e=.98*document.querySelector(".shop").offsetTop;i(document.documentElement,e,70)})},function(e,t,i){"use strict";i.r(t);class o{constructor(){this.item={}}async getData(e,t,i){const o=`http://www.omdbapi.com/?apikey=1ea6d4f9&&t=${e}`;let n;n=0===t.length&&"short"===i?o:0!==t.length&&"short"===i?`${o}&y=${t}`:0===t.length&&"full"===i?`${o}&plot=full`:`${o}&y=${t}&plot=full`,this.item=await(await fetch(n).then(e=>e.json()).catch(e=>e)),this.plot=i}getMovieFromFav(e,t){const i=t.findIndex(t=>t.imdbID===e);i<0?this.item.Response="False":this.item=t[i]}}class n{constructor(e,t){this.id=e,this.plot=t,this.item={}}async getDetail(){let e="";"full"===this.plot&&(e="&plot=full"),this.item=await(await fetch(`http://www.omdbapi.com/?apikey=1ea6d4f9&&i=${this.id}${e}`).then(e=>e.json()).catch(e=>e))}}class r{constructor(){this.arr=[]}createFav(e){this.arr.push(e),localStorage.setItem(e.imdbID,JSON.stringify(e))}deleteFav(e){let t;this.arr.forEach((i,o)=>{i.imdbID===e&&(t=o)}),this.arr.splice(t,1),localStorage.removeItem(e)}checkFav(e){return-1===this.arr.findIndex(t=>t.imdbID===e)}lengthFav(){return this.arr.length}startFav(){const e=Object.keys(localStorage);let t=e.length,i=0;for(;t--;)"loglevel:webpack-dev-server"!==e[t]&&(this.arr[i++]=JSON.parse(localStorage.getItem(e[t])))}}const c={movieTitle:document.querySelector(".title__search"),movieYear:document.querySelector(".year__search"),moviePlot:document.querySelector(".plot__search"),movieBtnSearch:document.querySelector(".btn__search"),movieBtnReset:document.querySelector(".btn__reset"),movieDisplay:document.querySelector(".movie-main"),favDisplay:document.querySelector(".fav__list"),favDisplayParent:document.querySelector(".fav__panel"),favHeartIcon:document.querySelector(".fav__search")},l=e=>{let t;if("False"===e.Response)t='\n        <div class="movie-box movie-result">\n            <div class="movie__title" style="color:#fff; width: 71vw;">\n            Sorry, we can\'t find that movie, or there is a problem with server ;(</div>\n        </div>\n        ';else{const i=a(e.Title);t=`\n        <div class="movie-box movie-result">\n            <img class="movie__photo" src="${e.Poster}" alt="Movie photo">\n            <div class="movie__title"><a href="#">${i}</a></div>\n            <div class="movie__rating">\n                <div class="movie__fav-icon"><ion-icon name="heart" class="movie__fav yellow-movieBtn"></ion-icon></div>\n                <ion-icon name="star" class="yellow"></ion-icon>${"N/A"!==e.Metascore?`${e.Metascore} / 100`:"N/A"}\n            </div>\n            <div class="movie__genre">${e.Genre}</div>\n            <div class="movie__ageTime">${e.Rated} | ${e.Runtime}</div>\n            <div class="movie__production">${e.Production}</div>\n        </div>\n        `}d(),c.movieDisplay.insertAdjacentHTML("afterbegin",t)},a=(e,t=18)=>{const i=[];let o=0;return e.length>t?([...e.split(" ")].forEach(e=>{o+e.length<=t&&(o+=e.length,i.push(e))}),`${i.join(" ")} ...`):e},s=()=>c.movieDisplay.classList.add("loader"),d=()=>c.movieDisplay.classList.remove("loader"),v=()=>c.movieDisplay.innerHTML="",u=()=>{c.movieTitle.value="",c.movieYear.value="";const e=c.moviePlot.options;0!==e&&(e.selectedIndex=0)},m=e=>{e.forEach(e=>{const t=a(e.Title),i=`\n            <a href="#" class="fav__link" id="${e.imdbID}">\n                <div class="fav__photo">\n                    <img src="${e.Poster}" alt="Movie img">\n                </div>\n                <div class="fav__title">${t}</div>\n            </a>\n            `;c.favDisplay.insertAdjacentHTML("beforeend",i)})},p=()=>c.favDisplay.innerHTML="",_=e=>{c.favHeartIcon.style.visibility=e?"visible":"hidden"},h=()=>{document.querySelector(".movie__fav").classList.toggle("yellow-movieBtn"),document.querySelector(".movie__fav").classList.toggle("red-movieBtn")},f={};c.movieBtnSearch.addEventListener("click",async()=>{""!==c.movieTitle.value&&((f.movie||f.detail)&&v(),s(),f.movie=new o,await f.movie.getData(c.movieTitle.value,c.movieYear.value,c.moviePlot.value),l(f.movie.item),f.favourite.checkFav(f.movie.item.imdbID)||h(),u())}),c.movieBtnReset.addEventListener("click",async()=>{(f.movie||f.detail)&&v(),u(),p(),f.movie&&delete f.movie,f.detail&&delete f.detail,delete f.favourite,localStorage.clear(),c.favHeartIcon.style.visibility="hidden"}),c.movieDisplay.addEventListener("click",async e=>{if(e.preventDefault(),e.target.matches(".movie__title, .movie__title *")){v(),s();let e=!0;f.detail&&(e=!1,f.detail.item.imdbID===f.movie.item.imdbID&&f.movie.plot===f.detail.plot||(delete f.detail,e=!0)),e&&(f.detail=new n(f.movie.item.imdbID,f.movie.plot),await f.detail.getDetail()),(e=>{let t;t="False"===e.Response?'\n        <div class="movie-box movie-result">\n            <div class="movie__title" style="color:#fff; width: 71vw;">\n            Sorry, we can\'t find that movie, or there is a problem with server ;(</div>\n        </div>\n        ':`\n        <div class="movie-box movie-detail">\n                <div class="movie-detail-container">\n                    <div class="movie-detail__intro">Więcej informacji o wybranym filmie</div>\n                    <div class="movie-detail__date">\n                        <div class="movie-detail__calendar">\n                            <ion-icon name="calendar"></ion-icon>\n                            <div>\n                                <p>DATA PREMIERY:</p>\n                                <p>${e.Released}</p>\n                            </div>\n                        </div>\n                        <div class="movie-detail__time">\n                            <ion-icon name="time"></ion-icon>\n                            <div>\n                                <p>CZAS TRWANIA:</p>\n                                <p>${e.Runtime}</p>\n                            </div>\n                        </div>\n                    </div>    \n                    <div class="movie-detail__descr">\n                        <p>${e.Plot}</p>\n                    </div>\n                    <div class="movie-detail__title">\n                        <p>TYTUŁ:</p><p>${e.Title}</p>\n                    </div>\n                    <div class="movie-detail__genre">\n                        <p>GATUNEK FILMU:</p><p>${e.Genre}</p>\n                    </div>\n                    <div class="movie-detail__actors">\n                        <p>OBSADA:</p><p>${e.Actors}</p>\n                    </div>\n                    <div class="movie-detail__director">\n                        <p>REŻYSER:</p><p>${e.Director}</p>\n                    </div>\n                    <div class="movie-detail__awards">\n                        <p>Nagrody:</p><p>${e.Awards}</p>\n                    </div>\n                    <div class="movie-detail__age">\n                        <p>OGRANICZENIA WIEKOWE:</p><p>${e.Rated}</p>\n                    </div>\n                </div>\n                <div class="movie-detail-rigth">\n                    <div class="movie-detail__like"><ion-icon name="heart" class="movie__fav yellow-movieBtn"></ion-icon></div>\n                    <img class="movie__photo" src="${e.Poster}" alt="Movie photo">\n                    <div class="movie-detail__return"><a href="#"><ion-icon name="arrow-round-back"></ion-icon>Return</a><div>\n                </div>\n            </div>\n        `,d(),c.movieDisplay.insertAdjacentHTML("afterbegin",t)})(f.detail.item),f.favourite.checkFav(f.detail.item.imdbID)||h()}else e.target.matches(".movie-detail__return *")?(v(),l(f.movie.item),f.favourite.checkFav(f.movie.item.imdbID)||h()):e.target.matches(".movie__fav-icon, .movie__fav-icon *, .movie-detail__like, .movie-detail__like *")&&(f.favourite||(f.favourite=new r),f.favourite.checkFav(f.movie.item.imdbID)?(f.favourite.createFav(f.movie.item),p(),m(f.favourite.arr)):(f.favourite.deleteFav(f.movie.item.imdbID),(e=>{const t=document.getElementById(e);t.parentNode.removeChild(t)})(f.movie.item.imdbID)),h(),_(f.favourite.lengthFav()))}),c.favDisplayParent.addEventListener("click",e=>{e.preventDefault(),u();let t=e.target.id;t||(t=e.target.parentNode.id),t&&(v(),f.movie=new o,f.movie.getMovieFromFav(t,f.favourite.arr),l(f.movie.item),f.favourite.checkFav(f.movie.item.imdbID)||h())}),window.addEventListener("load",()=>{f.favourite=new r,f.favourite.startFav(),_(f.favourite.lengthFav()),m(f.favourite.arr)})},function(e,t,i){"use strict";i.r(t);const o={initBtn:".add__btn",initProduct:".add__product",initDescription:".add__name",initPrice:".add__value",initIcon:".change__icon",sectionShop:".shop",addNewEl:".shop__list__el",moveNewEl:".shop__list__done",planMoney:".final__value",spendMoney:".after__value",shopBtnLeftColumn:".shop__list__el",shopBtnRightColumn:".shop__list__done",moveBtn:"move__btn",deleteBtn:"remove__btn",shopIntroLeftColumn:".shop__list__el-intro",shopIntroRightColumn:".shop__list__done-intro"},n=()=>{const e={product:document.querySelector(o.initProduct).value,description:document.querySelector(o.initDescription).value,price:parseFloat(document.querySelector(o.initPrice).value)};if(""!==e.description&&"number"==typeof e.price&&e.price>0)return e;{const e=document.querySelector(o.initBtn);return e.classList.remove("green"),e.classList.add("red"),e.removeChild(e.firstChild),e.insertAdjacentHTML("afterbegin",'<ion-icon name="close-circle"></ion-icon>'),!1}},r=()=>{const e=document.querySelector(o.initBtn);e.classList.remove("green"),e.classList.add("green"),e.classList.remove("red"),e.removeChild(e.firstChild),e.insertAdjacentHTML("afterbegin",'<ion-icon name="checkmark-circle"></ion-icon>')},c=()=>{const e=document.querySelector(o.initProduct).value,t=document.querySelector(o.initIcon);t.removeChild(t.firstChild),t.insertAdjacentHTML("afterbegin",`<img src="css/img/${e}.png">`)},l=e=>{const t=document.querySelector(o.initProduct).value;document.querySelector(o.initDescription).value="no_img"!==t?t:"",document.querySelector(o.initPrice).value=e},a=(e,t,i)=>{let n='\n                <div class="shop__list__el__new" id="add__%1%">\n                    <div class="shop__photo"><img src="css/img/%butter%.png"></div>\n                    <div class="shop__item"><p class="shop__title">%titleButter%</p>\n                        <button class="move__btn yellow"><ion-icon name="arrow-forward"></ion-icon></button>\n                        <button class="remove__btn red"><ion-icon name="close"></ion-icon></button>\n                    </div>\n                    <div class="shop__cash"><p>%5.23% PLN</p></div>\n                </div>';i||(n=(n=(n=n.replace("shop__list__el__new","shop__list__done__new")).replace("add","move")).replace("arrow-forward","arrow-back")),n=(n=n.replace("%1%",t)).replace("%butter%",e.product),"no_img"===e.product&&(n=n.replace("png","jpg")),n=(n=n.replace("%titleButter%",e.description)).replace("%5.23%",e.price),i?document.querySelector(o.addNewEl).insertAdjacentHTML("beforeend",n):document.querySelector(o.moveNewEl).insertAdjacentHTML("beforeend",n)},s=e=>{0===e[0]&&(e[0]="---"),0===e[1]&&(e[1]="---"),"number"==typeof e[0]?document.querySelector(o.planMoney).textContent=e[0].toFixed(2):document.querySelector(o.planMoney).textContent=e[0],"number"==typeof e[1]?document.querySelector(o.spendMoney).textContent=e[1].toFixed(2):document.querySelector(o.spendMoney).textContent=e[1]},d=e=>{const t=document.getElementById(e);t.parentNode.removeChild(t)},v=()=>{r(),document.querySelector(o.initProduct).disabled=!0,document.querySelector(o.initDescription).disabled=!0,document.querySelector(o.initPrice).disabled=!0,document.querySelector(o.initBtn).disabled=!0},u=()=>{const e=document.querySelectorAll(`${o.initDescription}, ${o.initPrice}`);for(let t=0;t<e.length;t++)e[t].value="";e[0].focus();const t=document.querySelector(o.initProduct).options;0!==t.selectedIndex&&(t.selectedIndex=0),c()};class m{constructor(e,t,i,o){this.product=e,this.description=t,this.price=i,this.id=o}}const p={planList:[],boughtList:[]},_={butter:4.29,chips:5.59,bread:1.14,juice:3.43},h=(e,t)=>{let i,o=null;if(p[t].forEach((t,i)=>{t.id===e&&(o=i)}),null!==o)return i=p[t].splice(o,1)},f=(e,t="planList")=>{let i;i=p[t].length>0?p[t][p[t].length-1].id+1:0;const o=new m(e.product,e.description,e.price,i);return p[t].push(o),i},y=e=>"no_img"!==e?_[e]:null,g=()=>{let e=0,t=0;return p.planList.length>0&&p.planList.forEach(t=>{e+=t.price}),p.boughtList.length>0&&p.boughtList.forEach(e=>{t+=e.price}),[e,t]},b=(e,t="planList")=>{let i=h(e,t);return delete(i=Object.assign({},...i)).id,[i,f(i,t="planList"===t?"boughtList":"planList")]},S=(e,t="planList")=>{h(e,t)},L=()=>p.planList.length>0,w=()=>p.boughtList.length>0;function q(e,t,i=!0){a(e,t,i);const o=g();s(o)}function D(){const e=n();if(e){q(e,f(e)),u()}P()}function I(e){const t=e.split("__"),i=parseInt(t[1]);if("add"===t[0]){const[e,t]=b(i);q(e,t,!1)}else if("move"===t[0]){const[e,t]=b(i,"boughtList");q(e,t,!0)}d(e)}function E(e){const t=e.split("__"),i=parseInt(t[1]);"add"===t[0]?S(i):"move"===t[0]&&S(i,"boughtList"),d(e),s(g())}function P(){const e=L(),t=w();document.querySelector(o.shopIntroLeftColumn).style.visibility=e?"visible":"hidden",document.querySelector(o.shopIntroRightColumn).style.visibility=t?"visible":"hidden"}document.querySelector(o.initProduct).addEventListener("focus",r),document.querySelector(o.initProduct).addEventListener("change",function(){c(),l(y(document.querySelector(o.initProduct).value))}),document.querySelector(o.initDescription).addEventListener("focus",r),document.querySelector(o.initPrice).addEventListener("focus",r),window.addEventListener("scroll",()=>{const e=.9*document.querySelector(o.sectionShop).offsetTop;window.scrollY>e?(document.querySelector(o.initProduct).disabled=!1,document.querySelector(o.initDescription).disabled=!1,document.querySelector(o.initPrice).disabled=!1,document.querySelector(o.initBtn).disabled=!1,document.querySelector(o.initBtn).addEventListener("click",D),document.addEventListener("keypress",e=>{13!==e.key&&13!==e.which||D()})):v()}),document.querySelector(o.shopBtnLeftColumn).addEventListener("click",e=>{const t=e.target.parentNode;t.classList.contains(o.moveBtn)&&I(t.parentNode.parentNode.id),t.classList.contains(o.deleteBtn)&&E(t.parentNode.parentNode.id),P()}),document.querySelector(o.shopBtnRightColumn).addEventListener("click",e=>{const t=e.target.parentNode;t.classList.contains(o.moveBtn)&&I(t.parentNode.parentNode.id),t.classList.contains(o.deleteBtn)&&E(t.parentNode.parentNode.id),P()});document.querySelector(o.planMoney).textContent="---",document.querySelector(o.spendMoney).textContent="---",v()}]);